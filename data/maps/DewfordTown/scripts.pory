mapscripts DewfordTown_MapScripts {
    DewfordTown_OnTransition
}

script DewfordTown_EventScript_Briney {
	lock
	faceplayer
// FIXME undefined reference: 	goto_if_unset FLAG_DELIVERED_STEVEN_LETTER, DewfordTown_EventScript_ReturnToPetalburgPrompt
	message DewfordTown_Text_WhereAreWeBound
	waitmessage
	multichoicedefault 21, 6, MULTI_BRINEY_ON_DEWFORD, 2, FALSE
	switch VAR_RESULT
	case 0, DewfordTown_EventScript_ChoosePetalburg
	case 1, DewfordTown_EventScript_ChooseSlateport
// FIXME undefined reference: 	case 2, DewfordTown_EventScript_CancelSailSelect
// FIXME undefined reference: 	case MULTI_B_PRESSED, DewfordTown_EventScript_CancelSailSelect
	end

}

script DewfordTown_EventScript_ChoosePetalburg {
	msgbox DewfordTown_Text_PetalburgWereSettingSail, MSGBOX_DEFAULT
	closemessage
	goto DewfordTown_EventScript_SailToPetalburg
	release
	end

}

script DewfordTown_EventScript_ChooseSlateport {
	msgbox DewfordTown_Text_SlateportWereSettingSail, MSGBOX_DEFAULT
	closemessage
	goto DewfordTown_EventScript_SailToSlateport
	release
	end

// FIXME undefined reference: DewfordTown_EventScript_CancelSailSelect::
	msgbox DewfordTown_Text_JustTellMeWhenYouNeedToSetSail, MSGBOX_DEFAULT
	closemessage
	release
	end

// FIXME undefined reference: DewfordTown_EventScript_ReturnToPetalburgPrompt::
	msgbox DewfordTown_Text_SetSailBackToPetalburg, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, YES, DewfordTown_EventScript_SailBackToPetalburg
	msgbox DewfordTown_Text_GoDeliverIllBeWaiting, MSGBOX_DEFAULT
	release
	end

}

script DewfordTown_EventScript_SailBackToPetalburg {
	msgbox DewfordTown_Text_PetalburgWereSettingSail2, MSGBOX_DEFAULT
	closemessage
	goto DewfordTown_EventScript_SailToPetalburg
	end

}

script DewfordTown_EventScript_Woman {
	msgbox DewfordTown_Text_TinyIslandCommunity, MSGBOX_NPC
	end

}

script DewfordTown_EventScript_TownSign {
	msgbox DewfordTown_Text_TownSign, MSGBOX_SIGN
	end

}

script DewfordTown_EventScript_GymSign {
	msgbox DewfordTown_Text_GymSign, MSGBOX_SIGN
	end

}

script DewfordTown_EventScript_HallSign {
	msgbox DewfordTown_Text_HallSign, MSGBOX_SIGN
	end

}

script DewfordTown_EventScript_OldRodFisherman {
	lock
	faceplayer
	goto_if_set FLAG_RECEIVED_OLD_ROD, DewfordTown_EventScript_HowsFishing
	msgbox DewfordTown_Text_GettingItchToFish, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, YES, DewfordTown_EventScript_GiveOldRod
	goto_if_eq VAR_RESULT, NO, DewfordTown_EventScript_NotGettingItchToFish
	end

}

script DewfordTown_EventScript_GiveOldRod {
	msgbox DewfordTown_Text_GiveYouOneOfMyRods, MSGBOX_DEFAULT
	giveitem ITEM_OLD_ROD
	goto_if_eq VAR_RESULT, FALSE, Common_EventScript_ShowBagIsFull
	setflag FLAG_RECEIVED_OLD_ROD
	msgbox DewfordTown_Text_ThrowInFishingAdvice, MSGBOX_DEFAULT
	release
	end

}

script DewfordTown_EventScript_NotGettingItchToFish {
	msgbox DewfordTown_Text_ThatsTooBadThen, MSGBOX_DEFAULT
	release
	end

}

script DewfordTown_EventScript_HowsFishing {
	message DewfordTown_Text_HowsYourFishing
	waitmessage
	multichoice 20, 8, MULTI_HOWS_FISHING, TRUE
	goto_if_eq VAR_RESULT, 0, DewfordTown_EventScript_FishingExcellent
	goto_if_eq VAR_RESULT, 1, DewfordTown_EventScript_FishingNotSoGood
	end

}

script DewfordTown_EventScript_FishingExcellent {
	msgbox DewfordTown_Text_GreatHaulInSomeBigOnes, MSGBOX_DEFAULT
	release
	end

}

script DewfordTown_EventScript_FishingNotSoGood {
	msgbox DewfordTown_Text_FishingAdvice, MSGBOX_DEFAULT
	release
	end

}

script DewfordTown_EventScript_SailToPetalburg {
	call EventScript_BackupMrBrineyLocation
	setobjectsubpriority LOCALID_DEWFORD_BRINEY, MAP_DEWFORD_TOWN, 0
	setobjectsubpriority LOCALID_PLAYER, MAP_DEWFORD_TOWN, 0
	applymovement LOCALID_DEWFORD_BRINEY, DewfordTown_Movement_BrineyBoardBoat
	waitmovement 0
	removeobject LOCALID_DEWFORD_BRINEY
	applymovement LOCALID_PLAYER, DewfordTown_Movement_PlayerBoardBoat
	waitmovement 0
	hideobjectat LOCALID_PLAYER, MAP_DEWFORD_TOWN
	call Common_EventScript_PlayBrineysBoatMusic
	applymovement LOCALID_DEWFORD_BOAT, DewfordTown_Movement_SailToPetalburg
	applymovement LOCALID_PLAYER, DewfordTown_Movement_SailToPetalburg
	waitmovement 0
	showobjectat LOCALID_PLAYER, MAP_ROUTE104
	call Common_EventScript_StopBrineysBoatMusic
	applymovement LOCALID_PLAYER, DewfordTown_Movement_ExitBoatPetalburg
	waitmovement 0
	showobjectat LOCALID_PLAYER, MAP_ROUTE104
	clearflag FLAG_HIDE_BRINEYS_HOUSE_MR_BRINEY
	clearflag FLAG_HIDE_BRINEYS_HOUSE_PEEKO
	clearflag FLAG_HIDE_ROUTE_104_MR_BRINEY_BOAT
	setflag FLAG_HIDE_MR_BRINEY_BOAT_DEWFORD_TOWN
	hideobjectat LOCALID_DEWFORD_BOAT, MAP_DEWFORD_TOWN
	setvar VAR_BOARD_BRINEY_BOAT_STATE, 2
	resetobjectsubpriority LOCALID_PLAYER, MAP_DEWFORD_TOWN
	warp MAP_ROUTE104_MR_BRINEYS_HOUSE, 5, 4
	copyvar VAR_BRINEY_LOCATION, VAR_0x8008
	waitstate
	release
	end

}

script DewfordTown_EventScript_SailToSlateport {
	call EventScript_BackupMrBrineyLocation
	setobjectsubpriority LOCALID_DEWFORD_BRINEY, MAP_DEWFORD_TOWN, 0
	setobjectsubpriority LOCALID_PLAYER, MAP_DEWFORD_TOWN, 1
	applymovement LOCALID_DEWFORD_BRINEY, DewfordTown_Movement_BrineyBoardBoat
	waitmovement 0
	removeobject LOCALID_DEWFORD_BRINEY
	applymovement LOCALID_PLAYER, DewfordTown_Movement_PlayerBoardBoat
	waitmovement 0
	hideobjectat LOCALID_PLAYER, MAP_DEWFORD_TOWN
	call Common_EventScript_PlayBrineysBoatMusic
	applymovement LOCALID_DEWFORD_BOAT, DewfordTown_Movement_SailToSlateport
	applymovement LOCALID_PLAYER, DewfordTown_Movement_SailToSlateport
	waitmovement 0
	call Common_EventScript_StopBrineysBoatMusic
	showobjectat LOCALID_PLAYER, MAP_ROUTE109
	applymovement LOCALID_PLAYER, DewfordTown_Movement_ExitBoatSlateport
	waitmovement 0
	setobjectxyperm LOCALID_ROUTE109_BRINEY, 21, 26
	addobject LOCALID_ROUTE109_BRINEY
	setobjectsubpriority LOCALID_ROUTE109_BRINEY, MAP_ROUTE109, 0
	applymovement LOCALID_ROUTE109_BRINEY, DewfordTown_Movement_BrineyExitBoat
	waitmovement 0
	clearflag FLAG_HIDE_ROUTE_109_MR_BRINEY
	addobject LOCALID_ROUTE109_BOAT
	clearflag FLAG_HIDE_ROUTE_109_MR_BRINEY_BOAT
	setflag FLAG_HIDE_MR_BRINEY_BOAT_DEWFORD_TOWN
	hideobjectat LOCALID_DEWFORD_BOAT, MAP_DEWFORD_TOWN
	call_if_unset FLAG_DELIVERED_DEVON_GOODS, DewfordTown_EventScript_LandedSlateportDeliverGoods
	call_if_set FLAG_DELIVERED_DEVON_GOODS, DewfordTown_EventScript_LandedSlateport
	closemessage
	copyvar VAR_BRINEY_LOCATION, VAR_0x8008
	resetobjectsubpriority LOCALID_PLAYER, MAP_DEWFORD_TOWN
	resetobjectsubpriority LOCALID_ROUTE109_BRINEY, MAP_ROUTE109
	copyobjectxytoperm LOCALID_ROUTE109_BRINEY
	release
	end

}

script DewfordTown_EventScript_LandedSlateportDeliverGoods {
	msgbox DewfordTown_Text_BrineyLandedInSlateportDeliverGoods, MSGBOX_DEFAULT
	return

}

script DewfordTown_EventScript_LandedSlateport {
	msgbox DewfordTown_Text_BrineyLandedInSlateport, MSGBOX_DEFAULT
	return

}

script DewfordTown_EventScript_TrendyPhraseBoy {
	lock
	faceplayer
	call Common_EventScript_BufferTrendyPhrase
	msgbox DewfordTown_Text_XIsTheBiggestHappeningThingRight, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, YES, DewfordTown_EventScript_ConfirmTrendyPhrase
	goto_if_eq VAR_RESULT, NO, DewfordTown_EventScript_RejectTrendyPhrase
	end

}

script DewfordTown_EventScript_ConfirmTrendyPhrase {
	msgbox DewfordTown_Text_YeahDefinitionOfInRightNow, MSGBOX_DEFAULT
	release
	end

}

script DewfordTown_EventScript_RejectTrendyPhrase {
	msgbox DewfordTown_Text_TellMeWhatsNewAndIn, MSGBOX_DEFAULT
	setvar VAR_0x8004, EASY_CHAT_TYPE_TRENDY_PHRASE
	call Common_ShowEasyChatScreen
	lock
	faceplayer
	goto_if_eq VAR_RESULT, TRUE, DewfordTown_EventScript_GiveNewTrendyPhrase
	goto_if_eq VAR_RESULT, FALSE, DewfordTown_EventScript_CancelNewTrendyPhrase
	end

}

script DewfordTown_EventScript_GiveNewTrendyPhrase {
	incrementgamestat GAME_STAT_STARTED_TRENDS
	goto_if_eq VAR_0x8004, FALSE, DewfordTown_EventScript_PhraseNotTrendyEnough
	msgbox DewfordTown_Text_OfCourseIKnowAboutThat, MSGBOX_DEFAULT
	release
	end

}

script DewfordTown_EventScript_CancelNewTrendyPhrase {
	msgbox DewfordTown_Text_HearOfAnyTrendsComeShareWithMe, MSGBOX_DEFAULT
	release
	end

}

script DewfordTown_EventScript_PhraseNotTrendyEnough {
	msgbox DewfordTown_Text_XHuhIThinkYIsCool, MSGBOX_DEFAULT
	release
	end

}

text DewfordTown_Text_TinyIslandCommunity {
    format("DEWFORD is a tiny island community. If something gets trendy here,\l everyone picks up on it right away.")
}

text DewfordTown_Text_TownSign {
    format("DEWFORD TOWN “A tiny island in the blue sea.”")
}

text DewfordTown_Text_GymSign {
    format("DEWFORD TOWN POKéMON GYM LEADER: BRAWLY\l “A big wave in fighting!”")
}

text DewfordTown_Text_HallSign {
    format("DEWFORD HALL “Everyone's information exchange!”")
}

text Route104_Text_LandedInDewfordDeliverLetter {
    format("MR. BRINEY: Ahoy! We've hit land in DEWFORD.\p I suppose you're off to deliver that LETTER to, who was it now, STEVEN!")
}

text DewfordTown_Text_SetSailBackToPetalburg {
    format("MR. BRINEY: Have you delivered your LETTER?\p Or were you meaning to sail back to PETALBURG?")
}

text DewfordTown_Text_PetalburgWereSettingSail2 {
    format("MR. BRINEY: PETALBURG it is, then!\p Anchors aweigh! PEEKO, we're setting sail, my darling!")
}

text DewfordTown_Text_GoDeliverIllBeWaiting {
    format("MR. BRINEY: Then you go on and deliver the LETTER. I'll be waiting.")
}

text DewfordTown_Text_BrineyLandedInDewford {
    format("MR. BRINEY: Ahoy! We've hit land in DEWFORD!\p You just go on and tell me whenever you want to set sail again!")
}

text DewfordTown_Text_WhereAreWeBound {
    format("MR. BRINEY: Ahoy! For you, I'll go out to sea anytime!\p Now, my friend, where are we bound?")
}

text DewfordTown_Text_PetalburgWereSettingSail {
    format("MR. BRINEY: PETALBURG, is it?\p Anchors aweigh! PEEKO, we're setting sail, my darling!")
}

text DewfordTown_Text_SlateportWereSettingSail {
    format("MR. BRINEY: SLATEPORT, is it?\p Anchors aweigh! PEEKO, we're setting sail, my darling!")
}

text DewfordTown_Text_JustTellMeWhenYouNeedToSetSail {
    format("MR. BRINEY: You just tell me whenever you need to set sail again!")
}

text DewfordTown_Text_GettingItchToFish {
    format("This is a renowned fishing spot. Are you getting the itch to fish?")
}

text DewfordTown_Text_GiveYouOneOfMyRods {
    format("I hear you, and I like what you're saying!\p I'll give you one of my fishing RODS.")
}

text DewfordTown_Text_ThrowInFishingAdvice {
    format("And, as an added bonus, I'll even throw in a little fishing advice!\p First, you want to face the water, then use the ROD.\p Focus your mind… If you get a bite, pull on the ROD.\p Sometimes you can snag something immediately, but with bigger catches,\l you need to time the pulls on your ROD\l to haul them in.")
}

text DewfordTown_Text_ThatsTooBadThen {
    format("Oh, is that so? That's too bad, then.")
}

text DewfordTown_Text_HowsYourFishing {
    format("Yo! How's your fishing?")
}

text DewfordTown_Text_GreatHaulInSomeBigOnes {
    format("Is that right! That's great! Haul in some big ones!")
}

text DewfordTown_Text_FishingAdvice {
    format("Oh, hey, don't get down on yourself! I'll give you a little fishing advice.\p First, you want to face the water, then use the ROD.\p Focus your mind… If you get a bite, pull the ROD.\p Sometimes you can snag something immediately, but with bigger catches,\l you need to time the pulls on your ROD\l to haul them in.")
}

text DewfordTown_Text_XIsTheBiggestHappeningThingRight {
    format("I like what's hip, happening, and trendy. I'm always checking it out.\p Listen, have you heard about this new “{STR_VAR_1}”?\p That's right! Of course you know!\p I mean, sheesh, “{STR_VAR_1}”…\l It's the hottest thing in cool!\p Wherever you're from, “{STR_VAR_1}”\l is the biggest happening thing, right?")
}

text DewfordTown_Text_TellMeWhatsNewAndIn {
    format("Hunh? It's not the hip and happening thing?\p Well, hey, you have to tell me, what's new and what's “in”?")
}

text DewfordTown_Text_OfCourseIKnowAboutThat {
    format("Hunh? “{STR_VAR_2}”?\p … …\p …Uh… Yeah! That's right! Yeah, I knew that! Knew it all along!\p Of course I know about that! “{STR_VAR_2},” right?\p Yeah, that's it, it's there! Isn't “{STR_VAR_2}”\l the coolest, or what?\p It's the hippest thing in hip. You think I'd not know about it?\p “{STR_VAR_1}”… It's, like, so five minutes ago.\p Now, “{STR_VAR_2}” is what's vital and in tune with the times!")
}

text DewfordTown_Text_XHuhIThinkYIsCool {
    format("Hmm… “{STR_VAR_2},” huh?\p But personally, I think “{STR_VAR_1}”\l is what's real in cool.")
}

text DewfordTown_Text_HearOfAnyTrendsComeShareWithMe {
    format("Well, if you hear of any happening new trends, come share them with me, okay?")
}

text DewfordTown_Text_YeahDefinitionOfInRightNow {
    format("Yeah, absolutely right!\p “{STR_VAR_1}” is the definition of “in” right now.")
}

