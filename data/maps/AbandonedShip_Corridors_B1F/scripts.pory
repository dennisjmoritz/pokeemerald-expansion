mapscripts AbandonedShip_Corridors_B1F_MapScripts {
    AbandonedShip_Corridors_B1F_OnResume
    AbandonedShip_Corridors_B1F_OnLoad
}

script AbandonedShip_Corridors_B1F_EventScript_LockStorageRoom {
	setmetatile 11, 4, METATILE_InsideShip_IntactDoor_Bottom_Locked, TRUE
	return

}

script AbandonedShip_Corridors_B1F_EventScript_UnlockStorageRoom {
	setmetatile 11, 4, METATILE_InsideShip_IntactDoor_Bottom_Unlocked, TRUE
	return

}

script AbandonedShip_Corridors_B1F_EventScript_TuberM {
	msgbox AbandonedShip_Corridors_B1F_Text_YayItsAShip, MSGBOX_NPC
	end

}

script AbandonedShip_Corridors_B1F_EventScript_StorageRoomDoor {
	lockall
	goto_if_set FLAG_USED_STORAGE_KEY, AbandonedShip_Corridors_B1F_EventScript_DoorIsUnlocked
	checkitem ITEM_STORAGE_KEY
	goto_if_eq VAR_RESULT, FALSE, AbandonedShip_Corridors_B1F_EventScript_DoorIsLocked
	msgbox AbandonedShip_Corridors_B1F_Text_InsertedStorageKey, MSGBOX_DEFAULT
	playse SE_PIN
	removeitem ITEM_STORAGE_KEY
	setflag FLAG_USED_STORAGE_KEY
	call AbandonedShip_Corridors_B1F_EventScript_UnlockStorageRoom
	special DrawWholeMapView
	releaseall
	end

}

script AbandonedShip_Corridors_B1F_EventScript_DoorIsLocked {
	msgbox AbandonedShip_Corridors_B1F_Text_DoorIsLocked, MSGBOX_DEFAULT
	releaseall
	end

}

script AbandonedShip_Corridors_B1F_EventScript_DoorIsUnlocked {
	msgbox AbandonedShip_Text_TheDoorIsOpen, MSGBOX_DEFAULT
	releaseall
	end

}

script AbandonedShip_Corridors_B1F_EventScript_Duncan {
	trainerbattle_single TRAINER_DUNCAN, AbandonedShip_Corridors_B1F_Text_DuncanIntro, AbandonedShip_Corridors_B1F_Text_DuncanDefeat
	msgbox AbandonedShip_Corridors_B1F_Text_DuncanPostBattle, MSGBOX_AUTOCLOSE
	end

}

text AbandonedShip_Corridors_B1F_Text_DuncanIntro {
    format("When we go out to sea, we SAILORS always bring our POKéMON.\l How about a quick battle?")
}

text AbandonedShip_Corridors_B1F_Text_DuncanDefeat {
    format("Whoops, I'm sunk!")
}

text AbandonedShip_Corridors_B1F_Text_DuncanPostBattle {
    format("The ship's bottom has sunk into the depths.\p If a POKéMON knew how to go underwater, we might make some progress…")
}

text AbandonedShip_Corridors_B1F_Text_YayItsAShip {
    format("Yay! It's a ship!")
}

text AbandonedShip_Corridors_B1F_Text_DoorIsLocked {
    format("The door is locked.\p “STORAGE” is painted on the door.")
}

text AbandonedShip_Corridors_B1F_Text_InsertedStorageKey {
    format("{PLAYER} inserted and turned the STORAGE KEY.\p The inserted KEY stuck fast, but the door opened.")
}

text AbandonedShip_Text_TheDoorIsOpen {
    format("The door is open.")
}

