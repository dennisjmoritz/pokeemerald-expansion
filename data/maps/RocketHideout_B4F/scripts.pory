mapscripts RocketHideout_B4F_MapScripts {
    RocketHideout_B4F_OnLoad
}

script RocketHideout_B4F_OnLoad {
	setvar NUM_DOOR_GRUNTS_DEFEATED, 0
// FIXME undefined reference: 	call_if_defeated TRAINER_TEAM_ROCKET_GRUNT_16, RocketHideout_B4F_EventScript_CountGruntDefeated
// FIXME undefined reference: 	call_if_defeated TRAINER_TEAM_ROCKET_GRUNT_17, RocketHideout_B4F_EventScript_CountGruntDefeated
	call_if_ne NUM_DOOR_GRUNTS_DEFEATED, 2, RocketHideout_B4F_EventScript_SetBarrier
	end

}

script RocketHideout_B4F_EventScript_CountGruntDefeated {
	addvar NUM_DOOR_GRUNTS_DEFEATED, 1
	return

}

script RocketHideout_B4F_EventScript_Giovanni {
	lock
	faceplayer
@	famechecker FAMECHECKER_GIOVANNI, 0
	message RocketHideout_B4F_Text_GiovanniIntro
	waitmessage
// FIXME undefined reference: 	playbgm MUS_ENCOUNTER_ROCKET, 0
	waitbuttonpress
// FIXME undefined reference: 	trainerbattle_no_intro TRAINER_BOSS_GIOVANNI, RocketHideout_B4F_Text_GiovanniDefeat
	msgbox RocketHideout_B4F_Text_GiovanniPostBattle
	fadescreen FADE_TO_BLACK
	closemessage
	removeobject LOCALID_HIDEOUT_GIOVANNI
	addobject LOCALID_SILPH_SCOPE
	clearflag FLAG_TEMP_1
// Replaced FLAG_HIDE_SILPH_SCOPE with FLAG_TEMP_1
	setflag FLAG_TEMP_1
// Replaced FLAG_HIDE_CELADON_ROCKETS with FLAG_TEMP_1
@	famechecker FAMECHECKER_GIOVANNI, FCPICKSTATE_COLORED, UpdatePickStateFromSpecialVar8005
	fadescreen FADE_FROM_BLACK
	release
	end

}

script RocketHideout_B4F_EventScript_SilphScope {
	lock
	faceplayer
	removeobject LOCALID_SILPH_SCOPE
	giveitem ITEM_SILPH_SCOPE
// FIXME undefined reference: 	goto_if_eq VAR_RESULT, FALSE, EventScript_BagIsFull
	release
	end

}

script RocketHideout_B4F_EventScript_Grunt1 {
// FIXME undefined reference: 	trainerbattle_single TRAINER_TEAM_ROCKET_GRUNT_18, RocketHideout_B4F_Text_Grunt1Intro, RocketHideout_B4F_Text_Grunt1Defeat, RocketHideout_B4F_EventScript_DefeatedGrunt1
	msgbox RocketHideout_B4F_Text_Grunt1PostBattle
	release
	end

}

script RocketHideout_B4F_EventScript_DefeatedGrunt1 {
	msgbox RocketHideout_B4F_Text_Grunt1PostBattle
	addobject LOCALID_LIFT_KEY
	clearflag FLAG_TEMP_1
// Replaced FLAG_HIDE_LIFT_KEY with FLAG_TEMP_1
	release
	end

}

script RocketHideout_B4F_EventScript_LiftKey {
	lock
	faceplayer
	setflag FLAG_TEMP_1
// Replaced FLAG_CAN_USE_ROCKET_HIDEOUT_LIFT with FLAG_TEMP_1
	removeobject LOCALID_LIFT_KEY
	giveitem ITEM_LIFT_KEY
// FIXME undefined reference: 	goto_if_eq VAR_RESULT, FALSE, EventScript_BagIsFull
	release
	end

}

script RocketHideout_B4F_EventScript_Grunt2 {
// FIXME undefined reference: 	trainerbattle_single TRAINER_TEAM_ROCKET_GRUNT_16, RocketHideout_B4F_Text_Grunt2Intro, RocketHideout_B4F_Text_Grunt2Defeat, RocketHideout_B4F_EventScript_DefeatedGrunt2
	msgbox RocketHideout_B4F_Text_Grunt2PostBattle, MSGBOX_AUTOCLOSE
	end

}

script RocketHideout_B4F_EventScript_DefeatedGrunt2 {
	setvar NUM_DOOR_GRUNTS_DEFEATED, 0
// FIXME undefined reference: 	call_if_defeated TRAINER_TEAM_ROCKET_GRUNT_16, RocketHideout_B4F_EventScript_CountGruntDefeated
// FIXME undefined reference: 	call_if_defeated TRAINER_TEAM_ROCKET_GRUNT_17, RocketHideout_B4F_EventScript_CountGruntDefeated
	call_if_eq NUM_DOOR_GRUNTS_DEFEATED, 2, RocketHideout_B4F_EventScript_RemoveBarrier
	call_if_eq NUM_DOOR_GRUNTS_DEFEATED, 2, RocketHideout_B4F_EventScript_DrawMapForBarrierRemoval
	release
	end

}

script RocketHideout_B4F_EventScript_Grunt3 {
// FIXME undefined reference: 	trainerbattle_single TRAINER_TEAM_ROCKET_GRUNT_17, RocketHideout_B4F_Text_Grunt3Intro, RocketHideout_B4F_Text_Grunt3Defeat, RocketHideout_B4F_EventScript_DefeatedGrunt3
	msgbox RocketHideout_B4F_Text_Grunt3PostBattle, MSGBOX_AUTOCLOSE
	end

}

script RocketHideout_B4F_EventScript_DefeatedGrunt3 {
	setvar NUM_DOOR_GRUNTS_DEFEATED, 0
// FIXME undefined reference: 	call_if_defeated TRAINER_TEAM_ROCKET_GRUNT_16, RocketHideout_B4F_EventScript_CountGruntDefeated
// FIXME undefined reference: 	call_if_defeated TRAINER_TEAM_ROCKET_GRUNT_17, RocketHideout_B4F_EventScript_CountGruntDefeated
	call_if_eq NUM_DOOR_GRUNTS_DEFEATED, 2, RocketHideout_B4F_EventScript_RemoveBarrier
	call_if_eq NUM_DOOR_GRUNTS_DEFEATED, 2, RocketHideout_B4F_EventScript_DrawMapForBarrierRemoval
	release
	end

}

script RocketHideout_B4F_EventScript_DrawMapForBarrierRemoval {
	playse SE_UNLOCK
	special DrawWholeMapView
	waitse
	return

}

script RocketHideout_B4F_EventScript_SetBarrier {
// FIXME undefined reference: 	setmetatile 17, 12, METATILE_SilphCo_HideoutBarrier_TopLeft_Floor, 1
// FIXME undefined reference: 	setmetatile 18, 12, METATILE_SilphCo_HideoutBarrier_TopRight_Floor, 1
// FIXME undefined reference: 	setmetatile 17, 13, METATILE_SilphCo_HideoutBarrier_BottomLeft, 1
// FIXME undefined reference: 	setmetatile 18, 13, METATILE_SilphCo_HideoutBarrier_BottomRight, 1
// FIXME undefined reference: 	setmetatile 17, 14, METATILE_SilphCo_HideoutFloor_ShadeFull, 0
// FIXME undefined reference: 	setmetatile 18, 14, METATILE_SilphCo_HideoutFloor_ShadeFull, 0
	return

}

script RocketHideout_B4F_EventScript_RemoveBarrier {
// FIXME undefined reference: 	setmetatile 17, 12, METATILE_SilphCo_HideoutFloor_ShadeFull, 0
// FIXME undefined reference: 	setmetatile 18, 12, METATILE_SilphCo_HideoutFloor, 0
// FIXME undefined reference: 	setmetatile 17, 13, METATILE_SilphCo_HideoutFloor_ShadeFull, 0
// FIXME undefined reference: 	setmetatile 18, 13, METATILE_SilphCo_HideoutFloor, 0
// FIXME undefined reference: 	setmetatile 17, 14, METATILE_SilphCo_HideoutFloor_ShadeFull, 0
// FIXME undefined reference: 	setmetatile 18, 14, METATILE_SilphCo_HideoutFloor, 0
	return

}

script RocketHideout_B4F_Text_GiovanniIntro {
    .string "So! I must say, I am impressed you\n"
    .string "got here.\p"
    .string "TEAM ROCKET captures POKéMON from\n"
    .string "around the world.\p"
    .string "They're important tools for keeping\n"
    .string "our criminal enterprise going.\p"
    .string "I am the leader, GIOVANNI!\p"
    .string "For your insolence, you will feel a\n"
    .string "world of pain!$"

}

script RocketHideout_B4F_Text_GiovanniDefeat {
    .string "WHAT!\n"
    .string "This can't be!$"

}

script RocketHideout_B4F_Text_GiovanniPostBattle {
    .string "I see that you raise POKéMON with\n"
    .string "utmost care.\p"
    .string "A child like you would never\n"
    .string "understand what I hope to achieve.\p"
    .string "I shall step aside this time!\p"
    .string "I hope we meet again…$"

}

script RocketHideout_B4F_Text_Grunt2Intro {
    .string "I know you!\n"
    .string "You ruined our plans at MT. MOON!$"

}

script RocketHideout_B4F_Text_Grunt2Defeat {
    .string "Burned again!$"

}

script RocketHideout_B4F_Text_Grunt2PostBattle {
    .string "Do you have something against TEAM\n"
    .string "ROCKET?$"

}

script RocketHideout_B4F_Text_Grunt3Intro {
    .string "How can you not see the beauty of\n"
    .string "our evil?$"

}

script RocketHideout_B4F_Text_Grunt3Defeat {
    .string "Ayaya!$"

}

script RocketHideout_B4F_Text_Grunt3PostBattle {
    .string "BOSS!\n"
    .string "I'm sorry I failed you!$"

}

script RocketHideout_B4F_Text_Grunt1Intro {
    .string "The elevator doesn't work?\n"
    .string "Who has the LIFT KEY?$"

}

script RocketHideout_B4F_Text_Grunt1Defeat {
    .string "No!$"

}

script RocketHideout_B4F_Text_Grunt1PostBattle {
    .string "Oh, no!\n"
    .string "I dropped the LIFT KEY!$"

}

