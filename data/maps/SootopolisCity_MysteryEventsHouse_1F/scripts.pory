#events for SootopolisCity_MysteryEventsHouse_1F

script SootopolisCity_MysteryEventsHouse_1F_MapScripts {
	map_script MAP_SCRIPT_ON_TRANSITION, SootopolisCity_MysteryEventsHouse_1F_OnTransition
	map_script MAP_SCRIPT_ON_FRAME_TABLE, SootopolisCity_MysteryEventsHouse_1F_OnFrame
	.byte 0

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_SetTrainerVisitingLayout {
	setvar VAR_TEMP_1, 1
	setobjectxyperm LOCALID_MYSTERY_EVENTS_OLD_MAN, 3, 2
	setobjectmovementtype LOCALID_MYSTERY_EVENTS_OLD_MAN, MOVEMENT_TYPE_FACE_DOWN
	setmaplayoutindex LAYOUT_SOOTOPOLIS_CITY_MYSTERY_EVENTS_HOUSE_1F_STAIRS_UNBLOCKED
	return

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_MoveOldManToDoor {
	setobjectxyperm LOCALID_MYSTERY_EVENTS_OLD_MAN, 2, 2
	setobjectmovementtype LOCALID_MYSTERY_EVENTS_OLD_MAN, MOVEMENT_TYPE_FACE_RIGHT
	return

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_OldManCommentOnBattle {
	lockall
	applymovement LOCALID_PLAYER, SootopolisCity_MysteryEventsHouse_1F_Movement_PlayerExitStairs
	waitmovement 0
	applymovement LOCALID_MYSTERY_EVENTS_OLD_MAN, SootopolisCity_MysteryEventsHouse_1F_Movement_OldManWalkBehindPlayer
	waitmovement 0
	copyobjectxytoperm LOCALID_MYSTERY_EVENTS_OLD_MAN
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	call_if_eq VAR_SOOTOPOLIS_MYSTERY_EVENTS_STATE, 1, SootopolisCity_MysteryEventsHouse_1F_EventScript_BattleWonComment
	call_if_eq VAR_SOOTOPOLIS_MYSTERY_EVENTS_STATE, 2, SootopolisCity_MysteryEventsHouse_1F_EventScript_BattleLostComment
	call_if_eq VAR_SOOTOPOLIS_MYSTERY_EVENTS_STATE, 3, SootopolisCity_MysteryEventsHouse_1F_EventScript_BattleTiedComment
	special LoadPlayerParty
	setvar VAR_SOOTOPOLIS_MYSTERY_EVENTS_STATE, 0
	releaseall
	end

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_BattleWonComment {
	msgbox SootopolisCity_MysteryEventsHouse_1F_Text_ThatWasSuperlative, MSGBOX_DEFAULT
	return

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_BattleLostComment {
	msgbox SootopolisCity_MysteryEventsHouse_1F_Text_TooBadForYou, MSGBOX_DEFAULT
	return

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_BattleTiedComment {
	msgbox SootopolisCity_MysteryEventsHouse_1F_Text_BrilliantStandoff, MSGBOX_DEFAULT
	return

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_OldMan {
	lock
	faceplayer
	frontier_checkvisittrainer
	goto_if_eq VAR_RESULT, 1, SootopolisCity_MysteryEventsHouse_1F_EventScript_InvalidVisitingTrainer
	goto_if_eq VAR_TEMP_1, 1, SootopolisCity_MysteryEventsHouse_1F_EventScript_TrainerVisiting
	msgbox SootopolisCity_MysteryEventsHouse_1F_Text_OnlyAmusementWatchingBattles, MSGBOX_DEFAULT
	release
	end

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_InvalidVisitingTrainer {
	msgbox SootopolisCity_MysteryEventsHouse_1F_Text_OnlyAmusementWatchingBattles, MSGBOX_DEFAULT
	release
	end

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_TrainerVisiting {
	special SavePlayerParty
	special BufferEReaderTrainerName
	msgbox SootopolisCity_MysteryEventsHouse_1F_Text_ChallengeVisitingTrainer, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, SootopolisCity_MysteryEventsHouse_1F_EventScript_DeclineBattle
	call SootopolisCity_MysteryEventsHouse_1F_EventScript_ChooseParty
	goto_if_eq VAR_RESULT, 0, SootopolisCity_MysteryEventsHouse_1F_EventScript_DeclineBattle
	msgbox SootopolisCity_MysteryEventsHouse_1F_Text_SaveProgressBeforeBattle, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, SootopolisCity_MysteryEventsHouse_1F_EventScript_DeclineBattle
	special LoadPlayerParty
	call Common_EventScript_SaveGame
	goto_if_eq VAR_RESULT, FALSE, SootopolisCity_MysteryEventsHouse_1F_EventScript_DeclineBattle
	special SavePlayerParty
	special ReducePlayerPartyToSelectedMons
	msgbox SootopolisCity_MysteryEventsHouse_1F_Text_HopeToSeeGoodMatch, MSGBOX_DEFAULT
	closemessage
	call_if_eq VAR_FACING, DIR_NORTH, SootopolisCity_MysteryEventsHouse_1F_EventScript_EnterBasementNorth
	call_if_eq VAR_FACING, DIR_EAST, SootopolisCity_MysteryEventsHouse_1F_EventScript_EnterBasementEast
	call_if_eq VAR_FACING, DIR_WEST, SootopolisCity_MysteryEventsHouse_1F_EventScript_EnterBasementWest
	warp MAP_SOOTOPOLIS_CITY_MYSTERY_EVENTS_HOUSE_B1F, 3, 1
	waitstate
	release
	end

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_DeclineBattle {
	special LoadPlayerParty
	msgbox SootopolisCity_MysteryEventsHouse_1F_Text_YouWontBattle, MSGBOX_DEFAULT
	release
	end

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_ChooseParty {
	msgbox SootopolisCity_MysteryEventsHouse_1F_Text_KeepItTo3On3, MSGBOX_DEFAULT
	fadescreen FADE_TO_BLACK
	special ChooseHalfPartyForBattle
	waitstate
	return

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_EnterBasementNorth {
	applymovement VAR_LAST_TALKED, SootopolisCity_MysteryEventsHouse_1F_Movement_OldManMoveAsideLeft
	applymovement LOCALID_PLAYER, SootopolisCity_MysteryEventsHouse_1F_Movement_PlayerEnterBasementNorth
	waitmovement 0
	return

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_EnterBasementEast {
	applymovement VAR_LAST_TALKED, SootopolisCity_MysteryEventsHouse_1F_Movement_OldManMoveAsideRight
	applymovement LOCALID_PLAYER, SootopolisCity_MysteryEventsHouse_1F_Movement_PlayerEnterBasementEast
	waitmovement 0
	return

}

script SootopolisCity_MysteryEventsHouse_1F_EventScript_EnterBasementWest {
	applymovement VAR_LAST_TALKED, SootopolisCity_MysteryEventsHouse_1F_Movement_OldManMoveAsideLeft
	applymovement LOCALID_PLAYER, SootopolisCity_MysteryEventsHouse_1F_Movement_PlayerEnterBasementWest
	waitmovement 0
	return

}

text SootopolisCity_MysteryEventsHouse_1F_Text_OnlyAmusementWatchingBattles {
    format("When I was young, I traveled the world as a POKéMON TRAINER.\p Now that I've become an old buzzard, my only amusement is watching young\l TRAINERS battle.")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_DoorAppearsToBeLocked {
    format("The door appears to be locked.")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_ChallengeVisitingTrainer {
    format("A TRAINER named {STR_VAR_1} is visiting my home.\p Would you like to challenge {STR_VAR_1}?")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_YouWontBattle {
    format("You won't battle? I'm disappointed that I can't see you battle…")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_KeepItTo3On3 {
    format("Oh, good, good!\p But my house isn't all that sturdy.\p Could I ask you to keep it down to a 3-on-3 match?")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_SaveProgressBeforeBattle {
    format("Before you two battle, you should save your progress.")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_HopeToSeeGoodMatch {
    format("I hope to see a good match!")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_StrVar1Tie {
    format("{STR_VAR_1}")
}

text SootopolisCity_MysteryEventsHouse_B1F_Text_MatchEndedUpDraw {
    format("The match ended up a draw.")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_BrilliantStandoff {
    format("So, it became a standoff.\p It was a brilliant match in which neither side conceded a step!")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_StrVar1Won {
    format("{STR_VAR_1}")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_ThatWasSuperlative {
    format("That was superlative!\p Why, it was like seeing myself in my youth again!")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_StrVar1Lost {
    format("{STR_VAR_1}")
}

text SootopolisCity_MysteryEventsHouse_1F_Text_TooBadForYou {
    format("Ah, too bad for you!\p But it was a good match. I hope you can win next time.")
}

