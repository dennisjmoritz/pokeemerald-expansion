mapscripts LittlerootTown_BrendansHouse_2F_MapScripts {
    LittlerootTown_BrendansHouse_2F_OnTransition
    LittlerootTown_BrendansHouse_2F_OnWarp
}

script LittlerootTown_BrendansHouse_2F_EventScript_CheckShouldUpdateBrendanPos {
	goto_if_set FLAG_MET_RIVAL_LILYCOVE, LittlerootTown_BrendansHouse_2F_EventScript_TryUpdateBrendanPos
	goto_if_ge VAR_BIRCH_LAB_STATE, 2, LittlerootTown_BrendansHouse_2F_EventScript_Ret
	goto LittlerootTown_BrendansHouse_2F_EventScript_TryUpdateBrendanPos

}

script LittlerootTown_BrendansHouse_2F_EventScript_TryUpdateBrendanPos {
	checkplayergender
	goto_if_eq VAR_RESULT, MALE, LittlerootTown_BrendansHouse_2F_EventScript_Ret
	@ Odd that the MaysHouse equivalent was used below instead
	goto_if_ge VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 2, LittlerootTown_MaysHouse_2F_EventScript_Ret
	setobjectxyperm LOCALID_RIVALS_HOUSE_2F_RIVAL, 0, 2
	setobjectmovementtype LOCALID_RIVALS_HOUSE_2F_RIVAL, MOVEMENT_TYPE_FACE_UP
	return

}

script LittlerootTown_BrendansHouse_2F_EventScript_Ret {
	return

}

script LittlerootTown_BrendansHouse_2F_EventScript_CheckSetReadyToMeetBrendan {
	checkplayergender
	goto_if_eq VAR_RESULT, FEMALE, LittlerootTown_BrendansHouse_2F_EventScript_SetReadyToMeetBrendan
	return

}

script LittlerootTown_BrendansHouse_2F_EventScript_SetReadyToMeetBrendan {
	setvar VAR_LITTLEROOT_RIVAL_STATE, 2
	return

}

script LittlerootTown_BrendansHouse_2F_EventScript_CheckInitDecor {
	checkplayergender
	goto_if_eq VAR_RESULT, MALE, SecretBase_EventScript_InitDecorations
	end

}

script LittlerootTown_BrendansHouse_2F_EventScript_RivalsPokeBall {
	lockall
	goto_if_eq VAR_LITTLEROOT_RIVAL_STATE, 2, LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendan
	msgbox RivalsHouse_2F_Text_ItsRivalsPokeBall, MSGBOX_DEFAULT
	releaseall
	end

}

script LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendan {
	delay 10
	addobject LOCALID_RIVALS_HOUSE_2F_RIVAL
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, LittlerootTown_BrendansHouse_2F_Movement_BrendanEnters
	waitmovement 0
	playse SE_PIN
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, Common_Movement_ExclamationMark
	waitmovement 0
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, Common_Movement_Delay48
	waitmovement 0
	delay 10
	playbgm MUS_ENCOUNTER_BRENDAN, TRUE
	call_if_eq VAR_FACING, DIR_NORTH, LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanNorth
	call_if_eq VAR_FACING, DIR_SOUTH, LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanSouth
	call_if_eq VAR_FACING, DIR_WEST, LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanWest
	call_if_eq VAR_FACING, DIR_EAST, LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanEast
	setvar VAR_LITTLEROOT_RIVAL_STATE, 3
	setflag FLAG_HIDE_LITTLEROOT_TOWN_BRENDANS_HOUSE_2F_POKE_BALL
	clearflag FLAG_HIDE_LITTLEROOT_TOWN_BRENDANS_HOUSE_RIVAL_BEDROOM
	setvar VAR_LITTLEROOT_TOWN_STATE, 1
	savebgm MUS_DUMMY
	fadedefaultbgm
	releaseall
	end

}

script LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanNorth {
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, LittlerootTown_BrendansHouse_2F_Movement_BrendanApproachPlayerNorth
	waitmovement 0
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	msgbox RivalsHouse_2F_Text_BrendanWhoAreYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PLAYER, LittlerootTown_BrendansHouse_2F_Movement_PlayerWatchBrendanNorth
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, LittlerootTown_BrendansHouse_2F_Movement_BrendanWalkToPCNorth
	waitmovement 0
	return

}

script LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanSouth {
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, LittlerootTown_BrendansHouse_2F_Movement_BrendanApproachPlayerSouth
	waitmovement 0
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	msgbox RivalsHouse_2F_Text_BrendanWhoAreYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PLAYER, LittlerootTown_BrendansHouse_2F_Movement_PlayerWatchBrendanSouth
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, LittlerootTown_BrendansHouse_2F_Movement_BrendanWalkToPCSouth
	waitmovement 0
	return

}

script LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanWest {
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, LittlerootTown_BrendansHouse_2F_Movement_BrendanApproachPlayerWest
	waitmovement 0
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	msgbox RivalsHouse_2F_Text_BrendanWhoAreYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PLAYER, LittlerootTown_BrendansHouse_2F_Movement_PlayerWatchBrendanWest
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, LittlerootTown_BrendansHouse_2F_Movement_BrendanWalkToPCWest
	waitmovement 0
	return

}

script LittlerootTown_BrendansHouse_2F_EventScript_MeetBrendanEast {
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, LittlerootTown_BrendansHouse_2F_Movement_BrendanApproachPlayerEast
	waitmovement 0
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	msgbox RivalsHouse_2F_Text_BrendanWhoAreYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_RIVALS_HOUSE_2F_RIVAL, LittlerootTown_BrendansHouse_2F_Movement_BrendanWalkToPCEast
	waitmovement 0
	return

}

script LittlerootTown_BrendansHouse_2F_EventScript_PC {
	lockall
	checkplayergender
	goto_if_eq VAR_RESULT, MALE, LittlerootTown_BrendansHouse_2F_EventScript_CheckPlayersPC
	goto_if_eq VAR_RESULT, FEMALE, LittlerootTown_BrendansHouse_2F_EventScript_CheckRivalsPC
	end

}

script LittlerootTown_BrendansHouse_2F_EventScript_CheckPlayersPC {
	setvar VAR_0x8004, PC_LOCATION_BRENDANS_HOUSE
	special DoPCTurnOnEffect
	playse SE_PC_ON
	msgbox gText_PlayerHouseBootPC, MSGBOX_DEFAULT
	special BedroomPC
	waitstate
	releaseall
	end

}

script LittlerootTown_BrendansHouse_2F_EventScript_TurnOffPlayerPC {
	setvar VAR_0x8004, PC_LOCATION_BRENDANS_HOUSE
	playse SE_PC_OFF
	special DoPCTurnOffEffect
	releaseall
	end

}

script LittlerootTown_BrendansHouse_2F_EventScript_CheckRivalsPC {
	msgbox gText_PokemonTrainerSchoolEmail, MSGBOX_DEFAULT
	releaseall
	end

}

script PlayersHouse_2F_EventScript_Notebook {
	msgbox PlayersHouse_2F_Text_Notebook, MSGBOX_SIGN
	end

}

script PlayersHouse_2F_EventScript_GameCube {
	msgbox PlayersHouse_2F_Text_ItsAGameCube, MSGBOX_SIGN
	end

}

text PlayersHouse_2F_Text_ClockIsStopped {
    format("The clock is stopped…\p Better set it and start it!")
}

text PlayersHouse_2F_Text_HowDoYouLikeYourRoom {
    format("MOM: {PLAYER}, how do you like your new room?\p Good! Everything's put away neatly!\p They finished moving everything in downstairs, too.\p POKéMON movers are so convenient!\p Oh, you should make sure that everything's all there on your desk.")
}

text PlayersHouse_2F_Text_Notebook {
    format("{PLAYER} flipped open the notebook.\p ADVENTURE RULE NO. 1 Open the MENU with START.\p ADVENTURE RULE NO. 2 Record your progress with SAVE.\p The remaining pages are blank…")
}

text Common_Text_LookCloserAtMap {
    format("{PLAYER} took a closer look at the HOENN region map.")
}

text PlayersHouse_2F_Text_ItsAGameCube {
    format("It's a Nintendo GameCube.\p A Game Boy Advance is connected to serve as the Controller.")
}

